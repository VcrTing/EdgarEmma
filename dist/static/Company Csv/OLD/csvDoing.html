<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="file" id="csvFileInput" onchange="readCSVFile(this)" />
    <button onclick="funcSubmit()">submit</button>

    <script>
        function _build_MAP(header, cont) {
            let _h = ''
            const res = { }

            for (let i= 0; i< cont.length; i++ ) {
                _h = header[ i ]
                _h = _h ? _h : ( 'header_' + i )
                res[ _h ] = cont[ i ]
            }
            return res
        }

        function csv_header_and_cont(src) {
            let hd = src.shift()
            hd = hd ? hd.split(',') : [ ]
            return src ? [ hd, src ? src : [ ] ] : [ ]
        }

        function renderCsv(src) {
            let res = [ ]

            src = src.split('\r\n')

            src = csv_header_and_cont(src)
            
            console.log(src)
            if (src) {
                let _ct = [ ]
                let hd = src[ 0 ]
                let conts = src[ 1 ]
                let conts_LEN = conts.length

                for(let i= 0; i< conts_LEN; i++ ) {
                    _ct = conts[i].split(',')
                    res.push( _build_MAP(hd, _ct) )
                }
            }
            return res
        }        

        function readCSVFile(src) {
            var reader = new FileReader();
            reader.readAsText(src.files[0]);
            reader.onload = function() {
                var data = renderCsv(this.result)
                console.log('DATA =', data)
            }
        }

        // 提交
        function funcSubmit() {

        }
    </script>
</body>
</html>